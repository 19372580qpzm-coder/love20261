<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>2026 璀璨流光·旗舰版</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; cursor: crosshair; }
        
        #ui {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            text-align: center; z-index: 100;
        }

        /* 按钮样式升级：更明显的点击反馈 */
        button {
            pointer-events: auto;
            padding: 15px 60px; font-size: 22px; color: #fff; background: rgba(0,0,0,0.5);
            border: 2px solid #ffcc00; border-radius: 4px; cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.5);
            font-family: 'Microsoft YaHei', sans-serif; letter-spacing: 4px;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        button:hover { 
            background: #ffaa00; color: #000; 
            box-shadow: 0 0 60px #ffaa00; transform: scale(1.05);
        }
        button:active {
            transform: scale(0.95); background: #fff;
        }
        /* 禁用状态 */
        button:disabled {
            border-color: #555; color: #888; box-shadow: none; cursor: not-allowed;
        }

        /* 状态文字 */
        #status {
            margin-top: 15px; font-size: 14px; color: #888; font-family: monospace;
        }

        #tip {
            position: absolute; bottom: 50px; width: 100%; text-align: center;
            color: rgba(255, 255, 255, 0.5); font-family: sans-serif; font-size: 14px; 
            letter-spacing: 2px; pointer-events: none;
            opacity: 0; transition: opacity 2s;
            text-shadow: 0 0 10px #fff;
        }
    </style>
</head>
<body>

    <div id="ui">
        <button id="start-btn" disabled>正在连接引擎...</button>
        <div id="status">系统初始化中...</div>
    </div>
    <div id="tip">探索光点 · 寻找回忆</div>

    <!-- 换回最稳的 Staticfile 源 -->
    <script src="https://cdn.staticfile.org/three.js/r128/three.min.js"></script>
    <script src="https://cdn.staticfile.org/tween.js/18.6.4/tween.umd.js"></script>

    <script>
        // --- 1. 引擎自检系统 ---
        const startBtn = document.getElementById('start-btn');
        const statusDiv = document.getElementById('status');
        let engineReady = false;

        window.onload = function() {
            // 检查 Three.js 是否加载
            if (typeof THREE === 'undefined' || typeof TWEEN === 'undefined') {
                statusDiv.innerHTML = "❌ 网络错误：3D引擎加载失败。<br>请刷新页面或检查网络！";
                statusDiv.style.color = "red";
                startBtn.innerText = "资源丢失";
                startBtn.style.borderColor = "red";
            } else {
                engineReady = true;
                startBtn.removeAttribute('disabled');
                startBtn.innerText = "开启 2026";
                statusDiv.innerHTML = "✅ 系统就绪，点击开启";
                statusDiv.style.color = "#00ff00";
                
                // 初始化配置
                initSystem();
            }
        };

        // --- ⚙️ 核心配置 ---
        const CONFIG = {
            text: "张钰宸\n2026要一直快乐", 
            particleCount: 30000,    // 粒子数量
            baseSize: 8.0,           // 【增强】粒子更大了
            bloomStrength: 2.0,      // 【增强】发光强度翻倍
            colors: [0xffaa00, 0xffd700, 0xff4500, 0xffffff, 0xff00ff], // 金、橙、红、白、紫
            photoCount: 20,
            photoPath: 'photos/',
            photoExt: '.jpg'
        };

        let scene, camera, renderer, particles;
        let photoGroup = new THREE.Group();
        let photos = [];
        let state = 'idle'; 
        let clock = new THREE.Clock();
        let mouse = new THREE.Vector2(), raycaster = new THREE.Raycaster();
        let glowTexture;

        function initSystem() {
            glowTexture = createGlowTexture();
            
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x000000, 0.0005);